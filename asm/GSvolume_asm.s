.include "macros.inc"

.section .text, "ax"  # 0x80006980 - 0x803E1E60

.global func_801E0404
func_801E0404:
/* 801E0404 001DC064  94 21 FE E0 */	stwu r1, -0x120(r1)
/* 801E0408 001DC068  7C 08 02 A6 */	mflr r0
/* 801E040C 001DC06C  90 01 01 24 */	stw r0, 0x124(r1)
/* 801E0410 001DC070  DB E1 01 10 */	stfd f31, 0x110(r1)
/* 801E0414 001DC074  F3 E1 01 18 */	psq_st f31, 280(r1), 0, qr0
/* 801E0418 001DC078  DB C1 01 00 */	stfd f30, 0x100(r1)
/* 801E041C 001DC07C  F3 C1 01 08 */	psq_st f30, 264(r1), 0, qr0
/* 801E0420 001DC080  39 61 01 00 */	addi r11, r1, 0x100
/* 801E0424 001DC084  4B FE 6C E9 */	bl _savegpr_20
/* 801E0428 001DC088  7C 75 1B 78 */	mr r21, r3
/* 801E042C 001DC08C  7C 96 23 78 */	mr r22, r4
/* 801E0430 001DC090  7C B7 2B 78 */	mr r23, r5
/* 801E0434 001DC094  7C D8 33 78 */	mr r24, r6
/* 801E0438 001DC098  7C F9 3B 78 */	mr r25, r7
/* 801E043C 001DC09C  7D 1A 43 78 */	mr r26, r8
/* 801E0440 001DC0A0  7D 3B 4B 78 */	mr r27, r9
/* 801E0444 001DC0A4  48 01 38 9D */	bl func_801F3CE0
/* 801E0448 001DC0A8  2C 03 00 00 */	cmpwi r3, 0
/* 801E044C 001DC0AC  40 82 00 0C */	bne lbl_801E0458
/* 801E0450 001DC0B0  38 60 00 00 */	li r3, 0
/* 801E0454 001DC0B4  48 00 03 4C */	b lbl_801E07A0
lbl_801E0458:
/* 801E0458 001DC0B8  80 15 01 3C */	lwz r0, 0x13c(r21)
/* 801E045C 001DC0BC  2C 00 00 00 */	cmpwi r0, 0
/* 801E0460 001DC0C0  41 82 00 10 */	beq lbl_801E0470
/* 801E0464 001DC0C4  80 15 01 40 */	lwz r0, 0x140(r21)
/* 801E0468 001DC0C8  2C 00 00 00 */	cmpwi r0, 0
/* 801E046C 001DC0CC  40 82 00 0C */	bne lbl_801E0478
lbl_801E0470:
/* 801E0470 001DC0D0  38 60 00 00 */	li r3, 0
/* 801E0474 001DC0D4  48 00 03 2C */	b lbl_801E07A0
lbl_801E0478:
/* 801E0478 001DC0D8  38 75 00 D0 */	addi r3, r21, 0xd0
/* 801E047C 001DC0DC  38 81 00 98 */	addi r4, r1, 0x98
/* 801E0480 001DC0E0  48 09 BC 29 */	bl PSMTXInverse
/* 801E0484 001DC0E4  7E C4 B3 78 */	mr r4, r22
/* 801E0488 001DC0E8  38 61 00 98 */	addi r3, r1, 0x98
/* 801E048C 001DC0EC  38 A1 00 8C */	addi r5, r1, 0x8c
/* 801E0490 001DC0F0  48 09 C5 6D */	bl PSMTXMultVec
/* 801E0494 001DC0F4  7E E4 BB 78 */	mr r4, r23
/* 801E0498 001DC0F8  38 61 00 98 */	addi r3, r1, 0x98
/* 801E049C 001DC0FC  38 A1 00 80 */	addi r5, r1, 0x80
/* 801E04A0 001DC100  48 09 C5 5D */	bl PSMTXMultVec
/* 801E04A4 001DC104  C0 01 00 80 */	lfs f0, 0x80(r1)
/* 801E04A8 001DC108  C0 35 01 20 */	lfs f1, 0x120(r21)
/* 801E04AC 001DC10C  FC 00 08 40 */	fcmpo cr0, f0, f1
/* 801E04B0 001DC110  40 80 00 18 */	bge lbl_801E04C8
/* 801E04B4 001DC114  C0 01 00 8C */	lfs f0, 0x8c(r1)
/* 801E04B8 001DC118  FC 00 08 40 */	fcmpo cr0, f0, f1
/* 801E04BC 001DC11C  40 80 00 0C */	bge lbl_801E04C8
/* 801E04C0 001DC120  38 60 00 00 */	li r3, 0
/* 801E04C4 001DC124  48 00 02 DC */	b lbl_801E07A0
lbl_801E04C8:
/* 801E04C8 001DC128  C0 01 00 84 */	lfs f0, 0x84(r1)
/* 801E04CC 001DC12C  C0 35 01 24 */	lfs f1, 0x124(r21)
/* 801E04D0 001DC130  FC 00 08 40 */	fcmpo cr0, f0, f1
/* 801E04D4 001DC134  40 80 00 18 */	bge lbl_801E04EC
/* 801E04D8 001DC138  C0 01 00 90 */	lfs f0, 0x90(r1)
/* 801E04DC 001DC13C  FC 00 08 40 */	fcmpo cr0, f0, f1
/* 801E04E0 001DC140  40 80 00 0C */	bge lbl_801E04EC
/* 801E04E4 001DC144  38 60 00 00 */	li r3, 0
/* 801E04E8 001DC148  48 00 02 B8 */	b lbl_801E07A0
lbl_801E04EC:
/* 801E04EC 001DC14C  C0 01 00 88 */	lfs f0, 0x88(r1)
/* 801E04F0 001DC150  C0 35 01 28 */	lfs f1, 0x128(r21)
/* 801E04F4 001DC154  FC 00 08 40 */	fcmpo cr0, f0, f1
/* 801E04F8 001DC158  40 80 00 18 */	bge lbl_801E0510
/* 801E04FC 001DC15C  C0 01 00 94 */	lfs f0, 0x94(r1)
/* 801E0500 001DC160  FC 00 08 40 */	fcmpo cr0, f0, f1
/* 801E0504 001DC164  40 80 00 0C */	bge lbl_801E0510
/* 801E0508 001DC168  38 60 00 00 */	li r3, 0
/* 801E050C 001DC16C  48 00 02 94 */	b lbl_801E07A0
lbl_801E0510:
/* 801E0510 001DC170  C0 01 00 80 */	lfs f0, 0x80(r1)
/* 801E0514 001DC174  C0 35 01 2C */	lfs f1, 0x12c(r21)
/* 801E0518 001DC178  FC 00 08 40 */	fcmpo cr0, f0, f1
/* 801E051C 001DC17C  40 81 00 18 */	ble lbl_801E0534
/* 801E0520 001DC180  C0 01 00 8C */	lfs f0, 0x8c(r1)
/* 801E0524 001DC184  FC 00 08 40 */	fcmpo cr0, f0, f1
/* 801E0528 001DC188  40 81 00 0C */	ble lbl_801E0534
/* 801E052C 001DC18C  38 60 00 00 */	li r3, 0
/* 801E0530 001DC190  48 00 02 70 */	b lbl_801E07A0
lbl_801E0534:
/* 801E0534 001DC194  C0 01 00 84 */	lfs f0, 0x84(r1)
/* 801E0538 001DC198  C0 35 01 30 */	lfs f1, 0x130(r21)
/* 801E053C 001DC19C  FC 00 08 40 */	fcmpo cr0, f0, f1
/* 801E0540 001DC1A0  40 81 00 18 */	ble lbl_801E0558
/* 801E0544 001DC1A4  C0 01 00 90 */	lfs f0, 0x90(r1)
/* 801E0548 001DC1A8  FC 00 08 40 */	fcmpo cr0, f0, f1
/* 801E054C 001DC1AC  40 81 00 0C */	ble lbl_801E0558
/* 801E0550 001DC1B0  38 60 00 00 */	li r3, 0
/* 801E0554 001DC1B4  48 00 02 4C */	b lbl_801E07A0
lbl_801E0558:
/* 801E0558 001DC1B8  C0 01 00 88 */	lfs f0, 0x88(r1)
/* 801E055C 001DC1BC  C0 35 01 34 */	lfs f1, 0x134(r21)
/* 801E0560 001DC1C0  FC 00 08 40 */	fcmpo cr0, f0, f1
/* 801E0564 001DC1C4  40 81 00 18 */	ble lbl_801E057C
/* 801E0568 001DC1C8  C0 01 00 94 */	lfs f0, 0x94(r1)
/* 801E056C 001DC1CC  FC 00 08 40 */	fcmpo cr0, f0, f1
/* 801E0570 001DC1D0  40 81 00 0C */	ble lbl_801E057C
/* 801E0574 001DC1D4  38 60 00 00 */	li r3, 0
/* 801E0578 001DC1D8  48 00 02 28 */	b lbl_801E07A0
lbl_801E057C:
/* 801E057C 001DC1DC  A0 15 01 06 */	lhz r0, 0x106(r21)
/* 801E0580 001DC1E0  54 00 06 F7 */	rlwinm. r0, r0, 0, 0x1b, 0x1b
/* 801E0584 001DC1E4  41 82 00 0C */	beq lbl_801E0590
/* 801E0588 001DC1E8  7E A3 AB 78 */	mr r3, r21
/* 801E058C 001DC1EC  4B FF FA 71 */	bl func_801DFFFC__8GSvolumeFv
lbl_801E0590:
/* 801E0590 001DC1F0  38 61 00 80 */	addi r3, r1, 0x80
/* 801E0594 001DC1F4  38 81 00 8C */	addi r4, r1, 0x8c
/* 801E0598 001DC1F8  38 A1 00 74 */	addi r5, r1, 0x74
/* 801E059C 001DC1FC  48 09 C7 4D */	bl PSVECSubtract
/* 801E05A0 001DC200  C0 02 96 5C */	lfs f0, lbl_80641C5C-_SDA2_BASE_(r2)
/* 801E05A4 001DC204  3B E0 00 00 */	li r31, 0
/* 801E05A8 001DC208  C3 E2 96 50 */	lfs f31, lbl_80641C50-_SDA2_BASE_(r2)
/* 801E05AC 001DC20C  3B 80 00 00 */	li r28, 0
/* 801E05B0 001DC210  D0 1A 00 00 */	stfs f0, 0(r26)
/* 801E05B4 001DC214  80 75 01 44 */	lwz r3, 0x144(r21)
/* 801E05B8 001DC218  83 C3 00 40 */	lwz r30, 0x40(r3)
/* 801E05BC 001DC21C  A3 A3 00 34 */	lhz r29, 0x34(r3)
/* 801E05C0 001DC220  48 00 01 D0 */	b lbl_801E0790
lbl_801E05C4:
/* 801E05C4 001DC224  A0 1E 00 00 */	lhz r0, 0(r30)
/* 801E05C8 001DC228  38 61 00 74 */	addi r3, r1, 0x74
/* 801E05CC 001DC22C  80 DE 00 04 */	lwz r6, 4(r30)
/* 801E05D0 001DC230  38 81 00 68 */	addi r4, r1, 0x68
/* 801E05D4 001DC234  1C 00 00 0C */	mulli r0, r0, 0xc
/* 801E05D8 001DC238  80 B5 01 40 */	lwz r5, 0x140(r21)
/* 801E05DC 001DC23C  A0 C6 00 00 */	lhz r6, 0(r6)
/* 801E05E0 001DC240  80 F5 01 3C */	lwz r7, 0x13c(r21)
/* 801E05E4 001DC244  7C 05 04 6E */	lfsux f0, r5, r0
/* 801E05E8 001DC248  1C 06 00 0C */	mulli r0, r6, 0xc
/* 801E05EC 001DC24C  D0 01 00 68 */	stfs f0, 0x68(r1)
/* 801E05F0 001DC250  7E 87 02 14 */	add r20, r7, r0
/* 801E05F4 001DC254  C0 05 00 04 */	lfs f0, 4(r5)
/* 801E05F8 001DC258  D0 01 00 6C */	stfs f0, 0x6c(r1)
/* 801E05FC 001DC25C  C0 05 00 08 */	lfs f0, 8(r5)
/* 801E0600 001DC260  D0 01 00 70 */	stfs f0, 0x70(r1)
/* 801E0604 001DC264  48 09 C7 C5 */	bl PSQUATDotProduct
/* 801E0608 001DC268  FC 01 F8 40 */	fcmpo cr0, f1, f31
/* 801E060C 001DC26C  FF C0 08 90 */	fmr f30, f1
/* 801E0610 001DC270  4C 41 13 82 */	cror 2, 1, 2
/* 801E0614 001DC274  40 82 00 38 */	bne lbl_801E064C
/* 801E0618 001DC278  88 1E 00 02 */	lbz r0, 2(r30)
/* 801E061C 001DC27C  2C 00 00 00 */	cmpwi r0, 0
/* 801E0620 001DC280  41 82 01 68 */	beq lbl_801E0788
/* 801E0624 001DC284  C0 41 00 68 */	lfs f2, 0x68(r1)
/* 801E0628 001DC288  FF C0 08 50 */	fneg f30, f1
/* 801E062C 001DC28C  C0 21 00 6C */	lfs f1, 0x6c(r1)
/* 801E0630 001DC290  C0 01 00 70 */	lfs f0, 0x70(r1)
/* 801E0634 001DC294  FC 40 10 50 */	fneg f2, f2
/* 801E0638 001DC298  FC 20 08 50 */	fneg f1, f1
/* 801E063C 001DC29C  FC 00 00 50 */	fneg f0, f0
/* 801E0640 001DC2A0  D0 41 00 68 */	stfs f2, 0x68(r1)
/* 801E0644 001DC2A4  D0 21 00 6C */	stfs f1, 0x6c(r1)
/* 801E0648 001DC2A8  D0 01 00 70 */	stfs f0, 0x70(r1)
lbl_801E064C:
/* 801E064C 001DC2AC  7E 83 A3 78 */	mr r3, r20
/* 801E0650 001DC2B0  38 81 00 8C */	addi r4, r1, 0x8c
/* 801E0654 001DC2B4  38 A1 00 50 */	addi r5, r1, 0x50
/* 801E0658 001DC2B8  48 09 C6 91 */	bl PSVECSubtract
/* 801E065C 001DC2BC  38 61 00 50 */	addi r3, r1, 0x50
/* 801E0660 001DC2C0  38 81 00 68 */	addi r4, r1, 0x68
/* 801E0664 001DC2C4  48 09 C7 65 */	bl PSQUATDotProduct
/* 801E0668 001DC2C8  FC 01 F8 40 */	fcmpo cr0, f1, f31
/* 801E066C 001DC2CC  41 81 01 1C */	bgt lbl_801E0788
/* 801E0670 001DC2D0  FC 01 F0 40 */	fcmpo cr0, f1, f30
/* 801E0674 001DC2D4  4C 40 13 82 */	cror 2, 0, 2
/* 801E0678 001DC2D8  41 82 01 10 */	beq lbl_801E0788
/* 801E067C 001DC2DC  EF C1 F0 24 */	fdivs f30, f1, f30
/* 801E0680 001DC2E0  38 61 00 74 */	addi r3, r1, 0x74
/* 801E0684 001DC2E4  38 81 00 38 */	addi r4, r1, 0x38
/* 801E0688 001DC2E8  FC 20 F0 90 */	fmr f1, f30
/* 801E068C 001DC2EC  48 09 C6 81 */	bl PSVECScale
/* 801E0690 001DC2F0  38 61 00 8C */	addi r3, r1, 0x8c
/* 801E0694 001DC2F4  38 81 00 38 */	addi r4, r1, 0x38
/* 801E0698 001DC2F8  38 A1 00 44 */	addi r5, r1, 0x44
/* 801E069C 001DC2FC  48 09 C6 29 */	bl PSVECAdd
/* 801E06A0 001DC300  C0 41 00 44 */	lfs f2, 0x44(r1)
/* 801E06A4 001DC304  7E A3 AB 78 */	mr r3, r21
/* 801E06A8 001DC308  C0 21 00 48 */	lfs f1, 0x48(r1)
/* 801E06AC 001DC30C  7F C4 F3 78 */	mr r4, r30
/* 801E06B0 001DC310  C0 01 00 4C */	lfs f0, 0x4c(r1)
/* 801E06B4 001DC314  38 A1 00 5C */	addi r5, r1, 0x5c
/* 801E06B8 001DC318  D0 41 00 5C */	stfs f2, 0x5c(r1)
/* 801E06BC 001DC31C  D0 21 00 60 */	stfs f1, 0x60(r1)
/* 801E06C0 001DC320  D0 01 00 64 */	stfs f0, 0x64(r1)
/* 801E06C4 001DC324  4B FF F9 95 */	bl func_801E0058__8GSvolumeFPQ222$2unnamed$2GSvolume_cpp$29unkClass8P11gUnkClass14
/* 801E06C8 001DC328  2C 03 00 00 */	cmpwi r3, 0
/* 801E06CC 001DC32C  41 82 00 BC */	beq lbl_801E0788
/* 801E06D0 001DC330  C0 1A 00 00 */	lfs f0, 0(r26)
/* 801E06D4 001DC334  FC 00 F0 40 */	fcmpo cr0, f0, f30
/* 801E06D8 001DC338  40 81 00 B0 */	ble lbl_801E0788
/* 801E06DC 001DC33C  7E E3 BB 78 */	mr r3, r23
/* 801E06E0 001DC340  7E C4 B3 78 */	mr r4, r22
/* 801E06E4 001DC344  38 A1 00 14 */	addi r5, r1, 0x14
/* 801E06E8 001DC348  48 09 C6 01 */	bl PSVECSubtract
/* 801E06EC 001DC34C  FC 20 F0 90 */	fmr f1, f30
/* 801E06F0 001DC350  38 61 00 14 */	addi r3, r1, 0x14
/* 801E06F4 001DC354  38 81 00 20 */	addi r4, r1, 0x20
/* 801E06F8 001DC358  48 09 C6 15 */	bl PSVECScale
/* 801E06FC 001DC35C  7E C3 B3 78 */	mr r3, r22
/* 801E0700 001DC360  38 81 00 20 */	addi r4, r1, 0x20
/* 801E0704 001DC364  38 A1 00 2C */	addi r5, r1, 0x2c
/* 801E0708 001DC368  48 09 C5 BD */	bl PSVECAdd
/* 801E070C 001DC36C  C0 01 00 2C */	lfs f0, 0x2c(r1)
/* 801E0710 001DC370  7F 04 C3 78 */	mr r4, r24
/* 801E0714 001DC374  7F 05 C3 78 */	mr r5, r24
/* 801E0718 001DC378  38 75 00 D0 */	addi r3, r21, 0xd0
/* 801E071C 001DC37C  D0 19 00 00 */	stfs f0, 0(r25)
/* 801E0720 001DC380  C0 01 00 30 */	lfs f0, 0x30(r1)
/* 801E0724 001DC384  D0 19 00 04 */	stfs f0, 4(r25)
/* 801E0728 001DC388  C0 01 00 34 */	lfs f0, 0x34(r1)
/* 801E072C 001DC38C  D0 19 00 08 */	stfs f0, 8(r25)
/* 801E0730 001DC390  C0 01 00 68 */	lfs f0, 0x68(r1)
/* 801E0734 001DC394  D0 18 00 00 */	stfs f0, 0(r24)
/* 801E0738 001DC398  C0 01 00 6C */	lfs f0, 0x6c(r1)
/* 801E073C 001DC39C  D0 18 00 04 */	stfs f0, 4(r24)
/* 801E0740 001DC3A0  C0 01 00 70 */	lfs f0, 0x70(r1)
/* 801E0744 001DC3A4  D0 18 00 08 */	stfs f0, 8(r24)
/* 801E0748 001DC3A8  48 09 C3 09 */	bl PSMTXMultVecSR
/* 801E074C 001DC3AC  7F 03 C3 78 */	mr r3, r24
/* 801E0750 001DC3B0  7F 04 C3 78 */	mr r4, r24
/* 801E0754 001DC3B4  48 09 C5 D5 */	bl PSVECNormalize
/* 801E0758 001DC3B8  C0 22 96 78 */	lfs f1, lbl_80641C78-_SDA2_BASE_(r2)
/* 801E075C 001DC3BC  7F 03 C3 78 */	mr r3, r24
/* 801E0760 001DC3C0  38 81 00 08 */	addi r4, r1, 8
/* 801E0764 001DC3C4  48 09 C5 A9 */	bl PSVECScale
/* 801E0768 001DC3C8  7F 23 CB 78 */	mr r3, r25
/* 801E076C 001DC3CC  7F 25 CB 78 */	mr r5, r25
/* 801E0770 001DC3D0  38 81 00 08 */	addi r4, r1, 8
/* 801E0774 001DC3D4  48 09 C5 51 */	bl PSVECAdd
/* 801E0778 001DC3D8  2C 1B 00 00 */	cmpwi r27, 0
/* 801E077C 001DC3DC  D3 DA 00 00 */	stfs f30, 0(r26)
/* 801E0780 001DC3E0  3B E0 00 01 */	li r31, 1
/* 801E0784 001DC3E4  41 82 00 18 */	beq lbl_801E079C
lbl_801E0788:
/* 801E0788 001DC3E8  3B 9C 00 01 */	addi r28, r28, 1
/* 801E078C 001DC3EC  3B DE 00 08 */	addi r30, r30, 8
lbl_801E0790:
/* 801E0790 001DC3F0  57 80 04 3E */	clrlwi r0, r28, 0x10
/* 801E0794 001DC3F4  7C 00 E8 40 */	cmplw r0, r29
/* 801E0798 001DC3F8  41 80 FE 2C */	blt lbl_801E05C4
lbl_801E079C:
/* 801E079C 001DC3FC  7F E3 FB 78 */	mr r3, r31
lbl_801E07A0:
/* 801E07A0 001DC400  E3 E1 01 18 */	psq_l f31, 280(r1), 0, qr0
/* 801E07A4 001DC404  CB E1 01 10 */	lfd f31, 0x110(r1)
/* 801E07A8 001DC408  E3 C1 01 08 */	psq_l f30, 264(r1), 0, qr0
/* 801E07AC 001DC40C  39 61 01 00 */	addi r11, r1, 0x100
/* 801E07B0 001DC410  CB C1 01 00 */	lfd f30, 0x100(r1)
/* 801E07B4 001DC414  4B FE 69 A5 */	bl _restgpr_20
/* 801E07B8 001DC418  80 01 01 24 */	lwz r0, 0x124(r1)
/* 801E07BC 001DC41C  7C 08 03 A6 */	mtlr r0
/* 801E07C0 001DC420  38 21 01 20 */	addi r1, r1, 0x120
/* 801E07C4 001DC424  4E 80 00 20 */	blr

.global func_801E07C8
func_801E07C8:
/* 801E07C8 001DC428  38 A0 00 01 */	li r5, 1
/* 801E07CC 001DC42C  38 6D A0 A0 */	addi r3, r13, lbl_8063F360-_SDA_BASE_
/* 801E07D0 001DC430  38 80 00 04 */	li r4, 4
/* 801E07D4 001DC434  38 00 00 00 */	li r0, 0
/* 801E07D8 001DC438  98 AD A0 A0 */	stb r5, lbl_8063F360-_SDA_BASE_(r13)
/* 801E07DC 001DC43C  B0 83 00 02 */	sth r4, 2(r3)
/* 801E07E0 001DC440  98 03 00 04 */	stb r0, 4(r3)
/* 801E07E4 001DC444  4E 80 00 20 */	blr
